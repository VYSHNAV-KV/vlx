<!DOCTYPE html>
{% extends 'index.html' %}

{% block content %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Vehicle Details</title>
</head>
<body>
    <div class="main-panel">
          <div class="content-wrapper">
            <div style="background-color:#98FB98">
              <div class="col-12 grid-margin stretch-card">
                <div >
                  <div class="card-body py-0 px-0 px-sm-3">
                    <div style="background-color:#98FB98">
                      <div class="col-4 col-sm-3 col-xl-2">
                        <img src="assets/images/dashboard/Group126@2x.png" class="gradient-corona-img img-fluid" alt="">
                      </div>

                    </div>
                  </div>
                </div>
              </div>
            </div>
    <div class="col-12 grid-margin stretch-card" style="border: 3px solid #98FB98;">
        <div class="card">
            <div class="card-body">
                <h3 class="card-title">Enter Product Details</h3>
                <form class="forms-sample" method="post" action="{% url 'save_product' %}" enctype="multipart/form-data">
                    {% csrf_token %}

                    <!-- Category Selection -->
                    <div class="form-group">
<!--                            <label>User Name</label>-->
                            <input type="hidden" class="form-control" placeholder="User Name" name="Username" value="{{user_name}}" readonly >
                        </div>
                    <div class="form-group">
                    <label>What you need to sell ?</label>
                    <select id="category-select" name="Categoryname" onchange="adjustFormFields()" class="form-control" >
                        <option>Choose Category</option>>
                        {% for cat in categories %}
                            <option value="{{ cat.Categoryname }}" {% if cat.Categoryname == selected_category %}selected{% endif %}>
                                {{ cat.Categoryname }}
                            </option>
                        {% endfor %}
                    </select>
                    </div>
                    <div class="form-group">
    <label>Select your preferred subcategory</label>
    <select id="subcategory-select" class="form-control" name="Subcategoryname">
        <option value="">Choose Subcategory</option>
    </select>
</div>

                    <!-- Dynamic Fields Container -->
                    <div id="dynamic-fields">
                        <!-- Common Fields -->
                        <div class="form-group">
                            <label>Product Name</label>
                            <input type="text" class="form-control" placeholder="Product Name" name="Productname" value="" >
                        </div>
                        <div class="form-group">
                            <label>Owner Name</label>
                            <input type="text" class="form-control" placeholder="Owner Name" name="Ownername">
                        </div>

                        <div class="form-group">
                            <label>Price</label>
                            <input type="number" class="form-control" placeholder="Price" name="Price">
                        </div>
                        <div class="form-group">
                            <label>Mobile</label>
                            <input type="number" class="form-control" placeholder="Mobile" name="Mobile">
                        </div>
                        <div class="form-group">
                            <label>Location</label>
                            <input type="text" class="form-control" placeholder="Location" name="Location">
                        </div>
                        <div class="form-group">
                            <label>Description</label>
                            <textarea class="form-control" rows="4" placeholder="Desciption" name="Description"></textarea>
                        </div>

                        <div>
                            <label>Upload Images</label><br>


                            <div class="form-group">
                                <input type="file" class="form-control file-upload-info" placeholder="Upload Image" name="Vehicleimage1">
                            </div>
                            <div class="form-group">
                                <input type="file" class="form-control file-upload-info" placeholder="Upload Image" name="Vehicleimage2">
                            </div>
                            <div class="form-group">
                                <input type="file" class="form-control file-upload-info" placeholder="Upload Image" name="Vehicleimage3">
                            </div>
                        </div>
                    </div>

                    <!-- Submit Button -->
                    <button type="submit" class="btn btn-primary mr-2" style="width:150px">Submit</button>
                    <button class="btn btn-dark">Cancel</button>
                </form>
            </div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function () {
        $('#category-select').change(function () {
            const category = $(this).val();
            const subcategorySelect = $('#subcategory-select');

            // Clear and reset subcategory options
            subcategorySelect.empty();
            subcategorySelect.append('<option value="">Choose Subcategory</option>');

            if (category) {
                $.ajax({
                    url: "",  // Keep the same URL
                    data: {
                        'category': category
                    },
                    success: function (data) {
                        data.forEach(function (subcategory) {
                            subcategorySelect.append(
                                `<option value="${subcategory.Subcategoryname}">${subcategory.Subcategoryname}</option>`
                            );
                        });
                    },
                    error: function () {
                        alert('Failed to fetch subcategories. Please try again.');
                    }
                });
            }
        });
    });
</script>

    <script>
        function adjustFormFields() {
            const category = document.getElementById('category-select').value;
            const dynamicFields = document.getElementById('dynamic-fields');
            dynamicFields.innerHTML = '';

            // Common fields (always shown)
            dynamicFields.innerHTML += `
                <div class="form-group">
                    <label>Product Name</label>
                    <input type="text" class="form-control" placeholder="Product Name" name="Productname">
                </div>
                <div class="form-group">
                    <label>Owner Name</label>
                    <input type="text" class="form-control" placeholder="Owner Name" name="Ownername">
                </div>
                <div class="form-group">
                    <label>Asking Price</label>
                    <input type="number" class="form-control" placeholder="Price" name="Price">
                </div>
                <div class="form-group">
                    <label>Mobile</label>
                    <input type="number" class="form-control" placeholder="Mobile" name="Mobile">
                </div>
                <div class="form-group">
                    <label>Location</label>
                    <input type="text" class="form-control" placeholder="Location" name="Location">
                </div>
                <div class="form-group">
                    <label>Description</label>
                    <textarea class="form-control" rows="4" placeholder="Description" name="Description"></textarea>
                </div>
<!--                <div class="form-group">-->
<!--                    <label>Registration</label>-->
<!--                    <input type="text" class="form-control" placeholder="Registration" name="Registration">-->
<!--                </div>-->
<!--                <div class="form-group">-->
<!--                    <label>Company</label>-->
<!--                    <input type="text" class="form-control" placeholder="Company" name="Company">-->
<!--                </div>-->
                <div>
                    <label>Upload Images</label><br>
                    <div class="form-group">
                        <input type="file" class="form-control file-upload-info" placeholder="Upload Image" name="Vehicleimage1">
                    </div>
                    <div class="form-group">
                        <input type="file" class="form-control file-upload-info" placeholder="Upload Image" name="Vehicleimage2">
                    </div>
                    <div class="form-group">
                        <input type="file" class="form-control file-upload-info" placeholder="Upload Image" name="Vehicleimage3">
                    </div>
                </div>
            `;

            // Add category-specific fields
if (category === 'Cars') {
    dynamicFields.innerHTML += `
        <div class="form-group">
            <label>Fuel Type</label>
            <input type="text" name="fuel_type" class="form-control" placeholder="Fuel Type">
        </div>
        <div class="form-group">
            <label>Mileage</label>
            <input type="text" name="mileage" class="form-control" placeholder="Mileage">
        </div>
        <div class="form-group">
            <label>Transmission</label>
            <input type="text" name="transmission" class="form-control" placeholder="Transmission">
        </div>
        <div class="form-group">
            <label>Year of Manufacture</label>
            <input type="text" name="year_of_manufacture" class="form-control" placeholder="Year of Manufacture">
        </div>
        <div class="form-group">
            <label>Color</label>
            <input type="text" name="color" class="form-control" placeholder="Color">
        </div>
    `;
} else if (category === 'Bikes') {
    dynamicFields.innerHTML += `
        <div class="form-group">
            <label>Engine CC</label>
            <input type="text" name="engine_cc" class="form-control" placeholder="Engine CC">
        </div>
        <div class="form-group">
            <label>Mileage</label>
            <input type="text" name="mileage" class="form-control" placeholder="Mileage">
        </div>
        <div class="form-group">
            <label>Brake Type</label>
            <input type="text" name="brake_type" class="form-control" placeholder="Brake Type">
        </div>
        <div class="form-group">
            <label>Year of Manufacture</label>
            <input type="text" name="year_of_manufacture" class="form-control" placeholder="Year of Manufacture">
        </div>
        <div class="form-group">
            <label>Fuel Type</label>
            <input type="text" name="fuel_type" class="form-control" placeholder="Fuel Type">
        </div>
    `;
} else if (category === 'Properties') {
    dynamicFields.innerHTML += `
        <div class="form-group">
            <label>Property Type</label>
            <input type="text" name="property_type" class="form-control" placeholder="Property Type">
        </div>
        <div class="form-group">
            <label>Number of Bedrooms</label>
            <input type="text" name="bedrooms" class="form-control" placeholder="Number of Bedrooms">
        </div>
        <div class="form-group">
            <label>Area (sq.ft)</label>
            <input type="text" name="area" class="form-control" placeholder="Area">
        </div>
        <div class="form-group">
            <label>Furnished Status</label>
            <input type="text" name="furnished_status" class="form-control" placeholder="Furnished Status">
        </div>
        <div class="form-group">
            <label>Location</label>
            <input type="text" name="location" class="form-control" placeholder="Location">
        </div>
    `;
} else if (category === 'Mobiles') {
    dynamicFields.innerHTML += `
        <div class="form-group">
            <label>Brand</label>
            <input type="text" name="brand" class="form-control" placeholder="Brand">
        </div>
        <div class="form-group">
            <label>Model</label>
            <input type="text" name="model" class="form-control" placeholder="Model">
        </div>
        <div class="form-group">
            <label>Storage</label>
            <input type="text" name="storage" class="form-control" placeholder="Storage">
        </div>
        <div class="form-group">
            <label>Color</label>
            <input type="text" name="color" class="form-control" placeholder="Color">
        </div>
        <div class="form-group">
            <label>Condition</label>
            <input type="text" name="condition" class="form-control" placeholder="Condition">
        </div>
    `;
} else if (category === 'Jobs') {
    dynamicFields.innerHTML += `
        <div class="form-group">
            <label>Job Title</label>
            <input type="text" name="job_title" class="form-control" placeholder="Job Title">
        </div>
        <div class="form-group">
            <label>Company Name</label>
            <input type="text" name="company_name" class="form-control" placeholder="Company Name">
        </div>
        <div class="form-group">
            <label>Experience Required</label>
            <input type="text" name="experience" class="form-control" placeholder="Experience Required">
        </div>
        <div class="form-group">
            <label>Salary</label>
            <input type="text" name="salary" class="form-control" placeholder="Salary">
        </div>
        <div class="form-group">
            <label>Location</label>
            <input type="text" name="location" class="form-control" placeholder="Location">
        </div>
    `;
} else if (category === 'Furniture') {
    dynamicFields.innerHTML += `
        <div class="form-group">
            <label>Furniture Type</label>
            <input type="text" name="furniture_type" class="form-control" placeholder="Furniture Type">
        </div>
        <div class="form-group">
            <label>Material</label>
            <input type="text" name="material" class="form-control" placeholder="Material">
        </div>
        <div class="form-group">
            <label>Dimensions</label>
            <input type="text" name="dimensions" class="form-control" placeholder="Dimensions">
        </div>
        <div class="form-group">
            <label>Condition</label>
            <input type="text" name="condition" class="form-control" placeholder="Condition">
        </div>
        <div class="form-group">
            <label>Color</label>
            <input type="text" name="color" class="form-control" placeholder="Color">
        </div>
    `;
}else if (category === 'Electronics and Appliances') {
    dynamicFields.innerHTML += `
        <div class="form-group">
            <label>Appliance Type</label>
            <input type="text" name="appliance_type" class="form-control" placeholder="Appliance Type">
        </div>
        <div class="form-group">
            <label>Brand</label>
            <input type="text" name="brand" class="form-control" placeholder="Brand">
        </div>
        <div class="form-group">
            <label>Power Consumption</label>
            <input type="text" name="power_consumption" class="form-control" placeholder="Power Consumption">
        </div>
        <div class="form-group">
            <label>Warranty</label>
            <input type="text" name="warranty" class="form-control" placeholder="Warranty">
        </div>
        <div class="form-group">
            <label>Condition</label>
            <input type="text" name="condition" class="form-control" placeholder="Condition">
        </div>
    `;
}else if (category === 'Vehicle Spare') {
    dynamicFields.innerHTML += `
        <div class="form-group">
            <label>Part Type</label>
            <input type="text" name="part_type" class="form-control" placeholder="Part Type">
        </div>
        <div class="form-group">
            <label>Compatible Vehicle</label>
            <input type="text" name="compatible_vehicle" class="form-control" placeholder="Compatible Vehicle">
        </div>
        <div class="form-group">
            <label>Brand</label>
            <input type="text" name="brand" class="form-control" placeholder="Brand">
        </div>
        <div class="form-group">
            <label>Condition</label>
            <input type="text" name="condition" class="form-control" placeholder="Condition">
        </div>
        <div class="form-group">
            <label>Manufacture Date</label>
            <input type="text" name="manufacture_date" class="form-control" placeholder="Manufacture Date">
        </div>
    `;
}else if (category === 'Fashion') {
    dynamicFields.innerHTML += `
        <div class="form-group">
            <label>Clothing Type</label>
            <input type="text" name="clothing_type" class="form-control" placeholder="Clothing Type">
        </div>
        <div class="form-group">
            <label>Brand</label>
            <input type="text" name="brand" class="form-control" placeholder="Brand">
        </div>
        <div class="form-group">
            <label>Size</label>
            <input type="text" name="size" class="form-control" placeholder="Size">
        </div>
        <div class="form-group">
            <label>Material</label>
            <input type="text" name="material" class="form-control" placeholder="Material">
        </div>
        <div class="form-group">
            <label>Condition</label>
            <input type="text" name="condition" class="form-control" placeholder="Condition">
        </div>
    `;
}else if (category === 'Pets') {
    dynamicFields.innerHTML += `
        <div class="form-group">
            <label>Pet Type</label>
            <input type="text" name="pet_type" class="form-control" placeholder="Pet Type">
        </div>
        <div class="form-group">
            <label>Breed</label>
            <input type="text" name="breed" class="form-control" placeholder="Breed">
        </div>
        <div class="form-group">
            <label>Age</label>
            <input type="text" name="age" class="form-control" placeholder="Age">
        </div>
        <div class="form-group">
            <label>Vaccination Status</label>
            <input type="text" name="vaccination_status" class="form-control" placeholder="Vaccination Status">
        </div>
        <div class="form-group">
            <label>Gender</label>
            <input type="text" name="gender" class="form-control" placeholder="Gender">
        </div>
    `;
}else if (category === 'Sports & Hobbies') {
    dynamicFields.innerHTML += `
        <div class="form-group">
            <label>Item Type</label>
            <input type="text" name="item_type" class="form-control" placeholder="Item Type">
        </div>
        <div class="form-group">
            <label>Brand</label>
            <input type="text" name="brand" class="form-control" placeholder="Brand">
        </div>
        <div class="form-group">
            <label>Condition</label>
            <input type="text" name="condition" class="form-control" placeholder="Condition">
        </div>
        <div class="form-group">
            <label>Usage</label>
            <input type="text" name="usage" class="form-control" placeholder="Usage">
        </div>
        <div class="form-group">
            <label>Age of Item</label>
            <input type="text" name="age_of_item" class="form-control" placeholder="Age of Item">
        </div>
    `;
}else if (category === 'Services') {
    dynamicFields.innerHTML += `
        <div class="form-group">
            <label>Service Type</label>
            <input type="text" name="service_type" class="form-control" placeholder="Service Type">
        </div>
        <div class="form-group">
            <label>Experience</label>
            <input type="text" name="experience" class="form-control" placeholder="Experience">
        </div>
        <div class="form-group">
            <label>Location</label>
            <input type="text" name="location" class="form-control" placeholder="Location">
        </div>
        <div class="form-group">
            <label>Pricing</label>
            <input type="text" name="pricing" class="form-control" placeholder="Pricing">
        </div>
        <div class="form-group">
            <label>Contact Information</label>
            <input type="text" name="contact_info" class="form-control" placeholder="Contact Information">
        </div>
    `;
}
        }

        // Trigger on page load to show fields based on the initial selected category
        window.onload = function() {
            adjustFormFields();
        };
    </script>
</body>
</html>
{% endblock %}
